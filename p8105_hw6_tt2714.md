p8105\_hw6\_tt2714
================
Tiffany Tu
11/19/2018

## Problem 1

#### Data cleaningâ€¦

A city\_state variable is created to combine the two columns city and
state. Four cities that do not report victim race are removed.
Disposition, victim\_race, and victim\_sex columns are coded into binary
variables.

``` r
homicide = read_csv(file = "./homicide-data.csv") 
homicide_citystate = homicide %>% 
  unite(city_state, c(city, state), sep = ", ", remove = T) %>% 
  filter(!grepl('Dallas|Phoenix|Kansas City|Tulsa', city_state)) %>% 
  mutate(disposition = ifelse(disposition == "Closed by arrest", 1, 0),
         victim_race = ifelse(victim_race == "White", 1, 0), 
         victim_sex = ifelse(victim_sex == "Male", 1, 0)) %>% 
  mutate(victim_age = as.numeric(victim_age), 
         victim_sex = as.factor(victim_sex), 
         victim_race = as.factor(victim_race),
         victim_race = fct_relevel(victim_race, "1"))
```

#### Logistic Regression Model for Baltimore, MD

Outcome: disposition of homicide  
Reference group: race - white  
Predictors: sex and age

Use `broom::tidy` to clean up the model and include odds ratio with
confidence intervals.

``` r
baltimore = homicide_citystate %>% filter(city_state == "Baltimore, MD")
baltimore_glm = glm(disposition ~ victim_race + victim_age + victim_sex, 
                    data = baltimore, family = binomial())

baltimore_glm %>% 
  broom::tidy(., conf.int = TRUE) %>% 
  mutate(odds.ratio = exp(estimate),
         conf.low = exp(conf.low),
         conf.high = exp(conf.high)) %>% kable(digits = 3)
```

| term          | estimate | std.error | statistic | p.value | conf.low | conf.high | odds.ratio |
| :------------ | -------: | --------: | --------: | ------: | -------: | --------: | ---------: |
| (Intercept)   |    1.186 |     0.235 |     5.055 |   0.000 |    2.076 |     5.212 |      3.274 |
| victim\_race0 |  \-0.820 |     0.175 |   \-4.694 |   0.000 |    0.312 |     0.620 |      0.441 |
| victim\_age   |  \-0.007 |     0.003 |   \-2.142 |   0.032 |    0.987 |     0.999 |      0.993 |
| victim\_sex1  |  \-0.888 |     0.136 |   \-6.525 |   0.000 |    0.315 |     0.537 |      0.412 |

#### Regression on all cities

Logistic regression on all cities with odds ratio and confidence
intervals.

## Problem 2
